{"version":3,"file":"limitList.js","sources":["pages/limitList/limitList.vue","F:/HBuilder/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbGltaXRMaXN0L2xpbWl0TGlzdC52dWU"],"sourcesContent":["<template>\r\n\t<view class=\"limit\">\r\n\t\t<view class=\"loadingSty\" v-if=\"!limitData.length\">\r\n\t\t\t<uni-load-more status=\"loading\"></uni-load-more>\r\n\t\t</view>\r\n\t\t<view class=\"centent\">\r\n\t\t\t<navigator :url=\"'/pages/detail/detail?id='+value._id\" class=\"item\" v-for=\"value in limitData\"\r\n\t\t\t\t:key=\"value._id\">\r\n\t\t\t\t<image :src=\"value.smallPicurl\" mode=\"aspectFill\"></image>\r\n\t\t\t</navigator>\r\n\t\t</view>\r\n\t\t<view class=\"loadingSty\" v-if=\"limitData.length\">\r\n\t\t\t<uni-load-more :status=\"requireBool?'noMore':'loading'\"></uni-load-more>\r\n\t\t</view> \r\n\r\n\t\t<view class=\"safe-height\">\r\n\r\n\t\t</view>\r\n\t</view> \r\n\r\n</template>\r\n\r\n<script setup>\r\n\timport {\r\n\t\tonLoad,\r\n\t\tonReachBottom,\r\n\t\tonShareAppMessage,\r\n\t\tonShareTimeline\r\n\t} from '@dcloudio/uni-app';\r\n\timport {\r\n\t\tref\r\n\t} from 'vue'\r\n\timport {\r\n\t\tapiGetLimitData,\r\n\t\tapiGetUserLimitData\r\n\t} from '../../api/apis';\r\n\r\n\r\n\t// 分享功能给好友 \r\n\tonShareAppMessage(() => {\r\n\t\treturn {\r\n\t\t\ttitle: \"分享给朋友\" + limitLocalName.value,\r\n\t\t\tpath: \"/pages/limitList/limitList?id=\" + limitLocalData.classid + \"&name=\" + limitLocalName.value\r\n\t\t}\r\n\t})\r\n\r\n\t// 分享功能到朋友圈\r\n\tonShareTimeline(() => {\r\n\t\treturn {\r\n\t\t\ttitle: \"分享到朋友圈\",\r\n\t\t\timageUrl: ''\r\n\t\t}\r\n\t})\r\n\r\n\tconst limitData = ref([]);\r\n\tconst limitLocalData = {\r\n\t\tpageNum: 1,\r\n\t\tpageSize: 12\r\n\t}\r\n\tconst requireBool = ref(false)\r\n\tconst limitLocalName = ref(null)\r\n\r\n\tonLoad((e) => {\r\n\t\tlet {\r\n\t\t\tid,\r\n\t\t\tname,\r\n\t\t\ttype\r\n\t\t} = e;\r\n\t\tif (type) limitLocalData.type = type;\r\n\t\tif (id) limitLocalData.classid = id;\r\n\t\tlimitLocalName.value = name;\r\n\t\tuni.setNavigationBarTitle({\r\n\t\t\ttitle: name,\r\n\t\t})\r\n\r\n\t\tgetLimitData();\r\n\t})\r\n\r\n\r\n\tonReachBottom(() => {\r\n\t\tif (requireBool.value) return\r\n\t\tlimitLocalData.pageNum++;\r\n\t\tgetLimitData();\r\n\t})\r\n\r\n\tconst getLimitData = async () => {\r\n\t\tlet res;\r\n\t\tif (limitLocalData.classid) res = await apiGetLimitData(limitLocalData);\r\n\t\tif (limitLocalData.type) res = await apiGetUserLimitData(limitLocalData);\r\n\t\tlimitData.value = [...limitData.value, ...res.data];\r\n\t\tif (limitLocalData.pageSize > res.data) requireBool.value = true\r\n\t\tuni.setStorageSync(\"limitData\", limitData.value)\r\n\t} \r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t.limit {\r\n\t\t.centent {\r\n\t\t\tdisplay: grid;\r\n\t\t\tgrid-template-columns: repeat(3, 1fr);\r\n\t\t\tgap: 5rpx;\r\n\t\t\tpadding: 5rpx;\r\n\r\n\t\t\t.item {\r\n\t\t\t\theight: 440rpx;\r\n\r\n\t\t\t\timage {\r\n\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\theight: 100%;\r\n\t\t\t\t\tdisplay: block;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>","import MiniProgramPage from 'E:/VsCodePro/UniAppStudy/project/pages/limitList/limitList.vue'\nwx.createPage(MiniProgramPage)"],"names":["onShareAppMessage","onShareTimeline","ref","onLoad","uni","onReachBottom","apiGetLimitData","apiGetUserLimitData"],"mappings":";;;;;;;;;;;;;;AAuBAA,kBAAAA,kBAAA,MAAA;AAiBA,aAAA;AAAA,QACA,OAAA,UAAA,eAAA;AAAA,QACA,MAAA,mCAAA,eAAA,UAAA,WAAA,eAAA;AAAA,MACA;AAAA,IACA,CAAA;AAGAC,kBAAAA,gBAAA,MAAA;AACA,aAAA;AAAA,QACA,OAAA;AAAA,QACA,UAAA;AAAA,MACA;AAAA,IACA,CAAA;AAEA,UAAA,YAAAC,kBAAA,CAAA,CAAA;AACA,UAAA,iBAAA;AAAA,MACA,SAAA;AAAA,MACA,UAAA;AAAA,IACA;AACA,UAAA,cAAAA,cAAA,IAAA,KAAA;AACA,UAAA,iBAAAA,cAAA,IAAA,IAAA;AAEAC,kBAAA,OAAA,CAAA,MAAA;AACA,UAAA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,MACA,IAAA;AACA,UAAA;AAAA,uBAAA,OAAA;AACA,UAAA;AAAA,uBAAA,UAAA;AACA,qBAAA,QAAA;AACAC,oBAAAA,MAAA,sBAAA;AAAA,QACA,OAAA;AAAA,MACA,CAAA;AAEA;IACA,CAAA;AAGAC,kBAAAA,cAAA,MAAA;AACA,UAAA,YAAA;AAAA;AACA,qBAAA;AACA;IACA,CAAA;AAEA,UAAA,eAAA,YAAA;AACA,UAAA;AACA,UAAA,eAAA;AAAA,cAAA,MAAAC,SAAA,gBAAA,cAAA;AACA,UAAA,eAAA;AAAA,cAAA,MAAAC,SAAA,oBAAA,cAAA;AACA,gBAAA,QAAA,CAAA,GAAA,UAAA,OAAA,GAAA,IAAA,IAAA;AACA,UAAA,eAAA,WAAA,IAAA;AAAA,oBAAA,QAAA;AACAH,oBAAAA,MAAA,eAAA,aAAA,UAAA,KAAA;AAAA,IACA;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3FA,GAAG,WAAW,eAAe;"}